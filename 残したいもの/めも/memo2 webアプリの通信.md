# Webアプリの通信セキュリティまとめ 🔐

## 1. Django（一軒家方式）
### 構造

[Djangoの建物]
├── フロント（テンプレート）
├── バック（Views）
└── 🔑 データベース（別棟）


### セキュリティ機能
- ✅ ログイン認証（標準装備）
- ✅ CSRFトークン（自動付与）
- ✅ セッション管理（自動）
- 🔑 データベース接続情報

### 特徴
- フロントとバックが同じアプリ内
- APIキー不要（同じ建物内の通信）
- セキュリティ機能が標準で充実

## 2. FastAPI + Next.js（別棟方式）
### 構造

[Next.jsの建物] ←🔑API Key→ [FastAPIの建物] ←🔑DB接続情報→ [データベースの建物]


### セキュリティ対策
1. **ログイン認証**
   - 自前で実装必要
   - JWTトークンなどで管理

2. **CORS制限**
   - 特定ドメインからのみアクセス許可
   ```python
   app.add_middleware(
       CORSMiddleware,
       allow_origins=["https://あなたのドメイン.com"]
   )
   ```

3. **APIキー**
   - フロント→バックの通信に必要
   - 不正アクセスを防ぐ

4. **データベース接続**
   - バック→データベースの通信用
   - 接続情報（URL/ユーザー/パスワード）

### 特徴
- フロントとバックが別アプリ
- より厳重なセキュリティが必要
- 柔軟なカスタマイズが可能

## CSRFトークンとは？
### 目的
- なりすまし攻撃（Cross-Site Request Forgery）の防止
- フォームの正当性を証明

### 動作
1. サーバーが特別な合言葉（トークン）を生成
2. フォームに埋め込む
3. 送信時にトークンを確認

### FastAPI + Next.jsでの対応
- ログイン認証
- CORS制限
- APIキー
この3つの対策で代替可能

## まとめ
- Djangoは「オールインワン」で手軽
- FastAPI + Next.jsは「分散型」で柔軟
- どちらも一長一短、用途に応じて選択
{% extends 'base.html' %}
{% load app_filters %}
{% load static %}

{# „Éä„Éì„Éê„Éº„ÇíÂÆåÂÖ®„Å´ÈùûË°®Á§∫„Å´„Åô„Çã #}
{% block navbar %}
{% endblock %}

{# „Éá„Éê„ÉÉ„Ç∞Áî® #}
{{ hide_navbar|default:"not set" }}

{% block content %}
<!-- „Çµ„Ç§„Éê„Éº„Éë„É≥„ÇØÈ¢®„ÅÆË£ÖÈ£æ -->
<div class="cyber-background position-fixed w-100 h-100" style="top: 0; left: 0; z-index: -1;">
    <div class="cyber-grid"></div>
</div>

<!-- „Çø„Éñ„Éä„Éì„Ç≤„Éº„Ç∑„Éß„É≥ -->
<div id="appTabs" class="app-tabs">
    <div class="container py-1">
        <nav class="nav nav-pills nav-fill m-0">
            <!-- „Éõ„Éº„É†„Å∏Êàª„Çã„Éú„Çø„É≥ -->
            <a href="/" class="nav-link cyber-home" title="„Éõ„Éº„É†„Å∏Êàª„Çã" onclick="handleHomeClick(event)">
                <span class="fs-4 me-2 cyber-emoji">üè†</span>
            </a>
            
            <a class="nav-link text-neon" href="#screenshots-section" style="color: #e9d5ff !important; text-shadow: 0 0 5px #e9d5ff;">
                <i class="bi bi-image-fill"></i> „Çπ„ÇØ„É™„Éº„É≥„Ç∑„Éß„ÉÉ„Éà
            </a>
            <a class="nav-link text-neon" href="#basic-section" style="color: #ffd700 !important; text-shadow: 0 0 5px #ffd700;">
                <i class="bi bi-info-circle-fill"></i> Âü∫Êú¨ÊÉÖÂ†±
            </a>
            <a class="nav-link text-neon" href="#appeal-section" style="color: #00ff9f !important; text-shadow: 0 0 5px #00ff9f;">
                <i class="bi bi-stars"></i> „Ç¢„Éó„É™„ÅÆÈ≠ÖÂäõ
            </a>
        </nav>
    </div>
</div>

<!-- „É°„Ç§„É≥„Ç≥„É≥„ÉÜ„É≥„ÉÑ -->
<div class="container main-content">
    <!-- „Éò„ÉÉ„ÉÄ„ÉºÈÉ®ÂàÜÔºàÊñ∞Ë¶è‰ΩúÊàê/Á∑®ÈõÜ/Ë©≥Á¥∞„ÅßÂàá„ÇäÊõø„ÅàÔºâ -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 style="color: {% if not readonly %}#00ff9f{% else %}#00ffff{% endif %}; 
                   text-shadow: 0 0 10px {% if not readonly %}#00ff9f{% else %}#00ffff{% endif %}, 
                              0 0 20px {% if not readonly %}#00ff9f{% else %}#00ffff{% endif %}; 
                   font-weight: bold;">
            {% if app.id %}
                {% if readonly %}
                    {{ app.title }}„ÅÆË©≥Á¥∞
                {% else %}
                    {{ app.title }}„ÇíÁ∑®ÈõÜ
                {% endif %}
            {% else %}
                Êñ∞„Åó„ÅÑ„Ç¢„Éó„É™„ÇíÁôªÈå≤
            {% endif %}
        </h2>
    </div>

    <!-- „Éï„Ç©„Éº„É†ÈñãÂßãÔºàÁ∑®ÈõÜ„É¢„Éº„Éâ„ÅÆÊôÇ„ÅÆ„ÅøÔºâ -->
    {% if not readonly %}
        <form id="appForm" 
              method="post" 
              action="{% if is_edit %}{% url 'apps_gallery:edit' app.id %}{% else %}{% url 'apps_gallery:create' %}{% endif %}"
              data-is-edit="{% if is_edit %}true{% else %}false{% endif %}"
              data-app-id="{{ app.id|default:'' }}"
              enctype="multipart/form-data" 
              class="needs-validation" 
              novalidate>
            {% csrf_token %}
            <input type="hidden" name="active_tab" id="active_tab" value="{{ active_tab }}">
            {% if app.id %}
                <input type="hidden" name="app_id" value="{{ app.id }}">
            {% endif %}
    {% endif %}

    <!-- ÂêÑ„Çª„ÇØ„Ç∑„Éß„É≥ -->
    <div class="row g-4">
        <div class="col-12">
            <!-- „Çπ„ÇØ„É™„Éº„É≥„Ç∑„Éß„ÉÉ„Éà„Çª„ÇØ„Ç∑„Éß„É≥ -->
            <section id="screenshots" class="mb-3 scroll-margin-top">
                {% include 'apps_gallery/tabs/01_screenshots_tab.html' %}
            </section>
        </div>

        <div class="col-12">
            <!-- Âü∫Êú¨ÊÉÖÂ†±„Çª„ÇØ„Ç∑„Éß„É≥ -->
            <section id="basic" class="mb-3">
                <div class="card border-0" id="basic-info-card">
                    <div class="card-body">
                        <h2 class="card-title h3 mb-4" style="color: #ffd700 !important;">
                            <i class="bi bi-info-circle-fill" style="color: #ffd700 !important;"></i> Âü∫Êú¨ÊÉÖÂ†±
                        </h2>

                        <!-- ‰ΩúËÄÖÂêçÔºàË°®Á§∫„ÅÆ„ÅøÔºâ -->
                        <div class="mb-4">
                            <label class="form-label text-cyber-yellow">‰ΩúËÄÖ</label>
                            <input type="text" 
                                   class="form-control cyber-yellow-focus" 
                                   value="{{ user.username }}"
                                   readonly>
                        </div>

                        <!-- „Ç¢„Éó„É™Âêç -->
                        <div class="mb-4">
                            <label class="form-label fw-bold text-cyber-yellow" for="title">
                                „Ç¢„Éó„É™Âêç
                            </label>
                            <input type="text" 
                                   id="title" 
                                   name="title" 
                                   class="form-control cyber-yellow-focus" 
                                   value="{{ app.title }}"
                                   {% if readonly %}readonly{% endif %}>
                        </div>

                        <!-- „Ç¢„Éó„É™„ÅÆÁ®ÆÈ°ûÔºà„ÉÅ„Çß„ÉÉ„ÇØ„Éú„ÉÉ„ÇØ„ÇπÔºâ -->
                        <div class="mb-4">
                            <label class="form-label">„Ç¢„Éó„É™„ÅÆÁ®ÆÈ°û</label>
                            <div class="row g-3">
                                {% for key, label in APP_TYPES.items %}
                                    <div class="col-md-3 col-sm-6">
                                        <div class="form-check">
                                            <input type="checkbox" 
                                                   name="app_types" 
                                                   value="{{ key }}"
                                                   id="type_{{ key }}"
                                                   class="form-check-input cyber-form-check-input"
                                                   {% if app and key in app.app_types %}checked{% endif %}
                                                   {% if readonly %}disabled{% endif %}>
                                            <label class="form-check-label cyber-form-check-label" for="type_{{ key }}">
                                                {{ label }}
                                            </label>
                                        </div>
                                    </div>
                                {% endfor %}
                            </div>
                        </div>

                        <!-- „Ç∏„É£„É≥„É´Ôºà„ÉÅ„Çß„ÉÉ„ÇØ„Éú„ÉÉ„ÇØ„ÇπÔºâ -->
                        <div class="mb-4">
                            <label class="form-label">„Ç∏„É£„É≥„É´</label>
                            <div class="row g-3">
                                {% for key, label in GENRES.items %}
                                    <div class="col-md-3 col-sm-6">
                                        <div class="form-check">
                                            <input type="checkbox" 
                                                   name="genres" 
                                                   value="{{ key }}"
                                                   id="genre_{{ key }}"
                                                   class="form-check-input cyber-checkbox"
                                                   {% if app and key in app.genres %}checked{% endif %}
                                                   {% if readonly %}disabled{% endif %}>
                                            <label class="form-check-label" for="genre_{{ key }}">
                                                {{ label }}
                                            </label>
                                        </div>
                                    </div>
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <div class="col-12">
            <!-- „Ç¢„Éó„É™„ÅÆÈ≠ÖÂäõ„Çª„ÇØ„Ç∑„Éß„É≥ -->
            <section id="appeal" class="mb-5">
                {% include 'apps_gallery/tabs/03_appeal_tab.html' %}
            </section>
        </div>
    </div>

    <!-- „Éï„Ç©„Éº„É†ÁµÇ‰∫ÜÔºàÁ∑®ÈõÜ„É¢„Éº„Éâ„ÅÆÊôÇ„ÅÆ„ÅøÔºâ -->
    {% if not readonly %}
        </form>
    {% endif %}

    <!-- ‰∏ãÈÉ®„ÅÆ„Éú„Çø„É≥„Ç∞„É´„Éº„Éó -->
    <div class="position-fixed d-flex justify-content-between align-items-center" 
         style="bottom: 20px; left: 20px; right: 20px; z-index: 1000; pointer-events: none;">
        
        <!-- Â∑¶ÔºöÁ©∫„Åç -->
        <div style="width: 33%;"></div>
        
        <!-- ‰∏≠Â§ÆÔºö„Çπ„ÉÜ„Éº„Çø„ÇπË°®Á§∫ -->
        <div style="width: 33%; display: flex; justify-content: center;">
            {% if not readonly and app.id %}
                <span class="status-badge editing-status"
                      style="opacity: 0.7;
                             transition: all 0.3s;
                             background-color: rgba(0, 0, 0, 0.7);
                             border: 2px solid var(--cyber-green);
                             padding: 10px 25px;
                             border-radius: 30px;
                             pointer-events: auto;
                             backdrop-filter: blur(8px);
                             -webkit-backdrop-filter: blur(8px);">
                    <i class="bi bi-pencil-square"></i> Á∑®ÈõÜ‰∏≠
                </span>
            {% elif readonly and app.id %}
                <span class="status-badge viewing-status"
                      style="opacity: 0.7;
                             transition: all 0.3s;
                             background-color: rgba(0, 0, 0, 0.7);
                             border: 2px solid var(--cyber-green);
                             padding: 10px 25px;
                             border-radius: 30px;
                             pointer-events: auto;
                             backdrop-filter: blur(8px);
                             -webkit-backdrop-filter: blur(8px);">
                    <i class="bi bi-eye"></i> Ë©≥Á¥∞
                </span>
            {% endif %}
        </div>
        
        <!-- Âè≥Ôºö‰øùÂ≠ò„Éú„Çø„É≥ -->
        <div style="width: 33%; display: flex; justify-content: flex-end;">
            {% if not readonly %}
                <button type="submit" 
                        form="appForm" 
                        class="btn-cyber-save"
                        style="opacity: 0.7;
                               transition: all 0.3s;
                               background-color: rgba(0, 0, 0, 0.7);
                               border: 2px solid var(--cyber-green);
                               padding: 10px 25px;
                               border-radius: 30px;
                               pointer-events: auto;
                               backdrop-filter: blur(8px);
                               -webkit-backdrop-filter: blur(8px);">
                    <i class="bi bi-save"></i> ‰øùÂ≠ò
                </button>
            {% endif %}
        </div>
    </div>

    <!-- ÁîªÈù¢Âè≥ÂÅ¥„ÅÆÊäÄË°ì„Å∏„Éú„Çø„É≥ -->
    <div class="position-fixed" style="top: 50%; right: 0; transform: translateY(-50%); z-index: 1000;">
        {% if app.id %}
            <a href="{% if readonly %}{% url 'apps_gallery:technical_detail' app.id %}{% else %}{% url 'apps_gallery:technical_edit' app.id %}{% endif %}" 
               onclick="confirmTechTransition(event)"
               class="btn btn-cyber-secondary d-flex align-items-center"
               style="opacity: 0.7; 
                      transition: all 0.3s;
                      margin-right: -10px;
                      border-radius: 60px 0 0 60px;
                      padding: 15px;
                      background-color: rgba(0, 0, 0, 0.7);
                      border: 2px solid var(--cyber-green);">
                <span class="d-none d-md-inline me-2" 
                      style="color: var(--cyber-green);
                             text-shadow: 0 0 5px var(--cyber-green);">
                    ÊäÄË°ì„Å∏
                </span>
                <span class="d-md-none" 
                      style="color: var(--cyber-green);
                             text-shadow: 0 0 5px var(--cyber-green);
                             font-weight: bold;
                             font-size: 20px;">
                    ÊäÄ
                </span>
            </a>
        {% endif %}
    </div>

    <!-- „É¢„Éê„Ç§„É´Áî®„ÉÑ„Éº„É´„ÉÅ„ÉÉ„Éó -->
    <div id="mobileTooltip" 
         style="display: none; 
                position: fixed; 
                background: rgba(0, 0, 0, 0.8);
                color: var(--cyber-green);
                border: 1px solid var(--cyber-green);
                padding: 8px 12px;
                border-radius: 4px;
                z-index: 1100;
                box-shadow: 0 0 10px rgba(0, 255, 159, 0.3);">
        ‰øùÂ≠ò„Åó„Å¶ÊäÄË°ìÊÉÖÂ†±„ÅÆÁ∑®ÈõÜ„Å∏
    </div>

    <!-- Á¢∫Ë™ç„ÉÄ„Ç§„Ç¢„É≠„Ç∞ -->
    <div class="modal fade" id="techConfirmModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content bg-dark" style="border: 2px solid var(--cyber-green); box-shadow: 0 0 20px var(--cyber-green);">
                <div class="modal-body text-center p-4">
                    <h5 class="mb-3" id="techConfirmModalLabel" 
                        style="color: var(--cyber-green); 
                               text-shadow: 0 0 10px var(--cyber-green);">
                        Á¢∫Ë™ç
                    </h5>
                    <p style="color: var(--cyber-green); margin-bottom: 20px;">
                        {% if readonly %}
                        ÊäÄË°ìÊÉÖÂ†±„ÅÆË©≥Á¥∞ÁîªÈù¢„Å∏ÁßªÂãï„Åó„Åæ„Åô„ÅãÔºü
                        {% else %}
                        ‰øùÂ≠ò„Åó„Å¶„ÄÅÊäÄË°ìÊÉÖÂ†±„ÅÆÁ∑®ÈõÜÁîªÈù¢„Å∏ÁßªÂãï„Åó„Åæ„Åô„ÅãÔºü
                        {% endif %}
                    </p>
                    <div class="mt-4">
                        <button type="button" 
                                class="btn btn-outline-cyber me-2 cancel-btn" 
                                data-bs-dismiss="modal"
                                style="color: var(--cyber-green); 
                                       border-color: var(--cyber-green);
                                       text-shadow: 0 0 5px var(--cyber-green);"
                                aria-label="„Ç≠„É£„É≥„Çª„É´">
                            „Ç≠„É£„É≥„Çª„É´
                        </button>
                        <button type="button" 
                                class="btn btn-cyber-green" 
                                id="saveTechButton"
                                style="background-color: var(--cyber-green); 
                                       color: #000; 
                                       font-weight: bold;
                                       box-shadow: 0 0 10px var(--cyber-green);"
                                aria-label="OK">
                            OK
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- „Éõ„Éº„É†ÁîªÈù¢ÁßªÂãïÁî®„ÅÆ„ÉÄ„Ç§„Ç¢„É≠„Ç∞ -->
    <div class="basic-dialog-overlay" id="homeDialog" style="display: none;">
        <div class="basic-dialog">
            <div class="basic-dialog-content">
                <div class="basic-message">
                    <div class="message-icon">
                        <i class="bi bi-exclamation-triangle"></i>
                    </div>
                    <div class="message-text">
                        ‰øùÂ≠ò„Åó„Å¶„ÄÅ„Éõ„Éº„É†ÁîªÈù¢„Å´ÁßªÂãï„Åó„Åæ„Åô„ÅãÔºü
                    </div>
                </div>
                <div class="basic-dialog-buttons">
                    <button class="basic-button cancel-dialog" onclick="closeHomeDialog()">
                        <span class="button-text">Èñâ„Åò„Çã</span>
                        <span class="button-glitch"></span>
                    </button>
                    <button class="basic-button save-dialog" onclick="saveAndGoHome()">
                        <span class="button-text">‰øùÂ≠ò„Åô„Çã</span>
                        <span class="button-glitch"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- „Éà„Éº„Çπ„ÉàË¶ÅÁ¥†„Çí‰øÆÊ≠£ -->
<div class="toast-container position-fixed top-50 start-50 translate-middle" style="z-index: 9999;">
    <div class="toast align-items-center text-white bg-success border-0" id="liveToast" role="alert" aria-live="assertive" aria-atomic="true">
        <div class="d-flex">
            <div class="toast-body">
                <i class="bi bi-check-circle me-2"></i>‰øùÂ≠ò„Åó„Åæ„Åó„ÅüÔºÅ
            </div>
            <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
        </div>
    </div>
</div>

<style>
/* „É°„Ç§„É≥„Ç≥„É≥„ÉÜ„É≥„ÉÑ„ÅÆ„Éû„Éº„Ç∏„É≥ */
.main-content {
    margin-top: 4rem !important;  /* Â∞ë„ÅóÂ∞è„Åï„Åè */
}

/* „Çª„ÇØ„Ç∑„Éß„É≥Èñì„ÅÆ‰ΩôÁôΩ */
section.mb-5 {
    margin-bottom: 2rem !important;  /* 5rem„Åã„Çâ2rem„Å´Â§âÊõ¥ */
    border-bottom: none !important;  /* ‰∏ãÁ∑ö„ÇíÂâäÈô§ */
}

/* „É¨„Çπ„Éù„É≥„Ç∑„ÉñÂØæÂøú */
@media (max-width: 768px) {  /* „Çø„Éñ„É¨„ÉÉ„Éà‰ª•‰∏ã */
    .main-content {
        margin-top: 6rem !important;
    }
}

@media (max-width: 576px) {  /* „Çπ„Éû„Éõ */
    .main-content {
        margin-top: 8rem !important;
    }
}

/* „Çø„Éñ„Éä„Éì„Ç≤„Éº„Ç∑„Éß„É≥ */
.app-tabs {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    background: rgba(13, 25, 45, 0.9);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    border-bottom: 1px solid rgba(0, 255, 255, 0.2);
    z-index: 999;
    transition: transform 0.3s ease; /* „Çπ„É†„Éº„Ç∫„Å™Ë°®Á§∫/ÈùûË°®Á§∫„ÅÆ„Åü„ÇÅ„ÅÆ„Éà„É©„É≥„Ç∏„Ç∑„Éß„É≥ */
}

/* „Çø„Éñ„ÅåÈö†„Çå„ÇãÊôÇ„ÅÆ„Çπ„Çø„Ç§„É´ */
.app-tabs.hidden {
    transform: translateY(-100%);
}

.app-tabs .container {
    padding-top: 0 !important;  /* „Ç≥„É≥„ÉÜ„Éä„ÅÆ‰∏äÈÉ®„Éë„Éá„Ç£„É≥„Ç∞„Çí0„Å´ */
    margin-top: 0 !important;   /* „Ç≥„É≥„ÉÜ„Éä„ÅÆ‰∏äÈÉ®„Éû„Éº„Ç∏„É≥„Çí0„Å´ */
}

.nav-pills {
    padding-top: 0 !important;  /* „Éä„Éì„ÅÆ‰∏äÈÉ®„Éë„Éá„Ç£„É≥„Ç∞„Çí0„Å´ */
    margin-top: 0 !important;   /* „Éä„Éì„ÅÆ‰∏äÈÉ®„Éû„Éº„Ç∏„É≥„Çí0„Å´ */
}

/* „Çπ„ÇØ„É≠„Éº„É´ÊôÇ„ÅÆ„Çπ„É†„Éº„Ç∫„Å™Âãï„Åç */
html {
    scroll-behavior: smooth;
    scroll-padding-top: 60px; /* „Çø„Éñ„ÅÆÈ´ò„Åï„Å´Âêà„Çè„Åõ„Å¶Ë™øÊï¥ */
}

/* „Ç¢„ÇØ„ÉÜ„Ç£„Éñ„Å™„Çø„Éñ„ÅÆ„Çπ„Çø„Ç§„É´ */
.nav-link.active {
    background-color: rgba(0, 255, 255, 0.2) !important;
    box-shadow: 0 0 15px rgba(0, 255, 255, 0.3);
}

/* „Çµ„Ç§„Éê„Éº„Éë„É≥„ÇØ„Å™ËÉåÊôØ */
.cyber-background {
    background: linear-gradient(45deg, #001e54, #0066cc);
}

/* Á∑®ÈõÜ„É¢„Éº„ÉâÊôÇ„ÅÆËÉåÊôØËâ≤„ÇíÂ§âÊõ¥ */
{% if not readonly %}
    {% if app %}
    .cyber-background {
        background: linear-gradient(45deg, #003322, #006644);
    }

    .cyber-grid {
        background-image: 
            linear-gradient(rgba(0,255,100,0.2) 1px, transparent 1px),
            linear-gradient(90deg, rgba(0,255,100,0.2) 1px, transparent 1px);
    }
    {% else %}
    /* Êñ∞Ë¶è‰ΩúÊàêÊôÇ„ÅÆËÉåÊôØËâ≤ */
    .cyber-background {
        background: linear-gradient(45deg, #1a1a3a, #4a1a4a);
    }

    .cyber-grid {
        background-image: 
            linear-gradient(rgba(255,0,255,0.2) 1px, transparent 1px),
            linear-gradient(90deg, rgba(0,255,255,0.2) 1px, transparent 1px);
    }
    {% endif %}
{% else %}
.cyber-grid {
    background-image: 
        linear-gradient(rgba(0,255,255,0.2) 1px, transparent 1px),
        linear-gradient(90deg, rgba(0,255,255,0.2) 1px, transparent 1px);
}
{% endif %}

.cyber-grid {
    background-size: 20px 20px;
    width: 100%;
    height: 100%;
    animation: gridGlow 4s ease-in-out infinite;
}

@keyframes gridGlow {
    0% { opacity: 0.5; }
    50% { opacity: 0.8; }
    100% { opacity: 0.5; }
}

/* Âü∫Êú¨Â§âÊï∞„ÅÆÂÆöÁæ© */
:root {
    --cyber-yellow: #ffd700;
    --cyber-green: #00ff9f;
    --cyber-blue: #00ffff;
    --cyber-purple: #bf5fff;
    --cyber-background: rgba(0, 20, 50, 0.8);
    --cyber-text: #ffffff;  /* Âü∫Êú¨„ÉÜ„Ç≠„Çπ„Éà„Ç´„É©„Éº */
}

/* ÂÖ®‰Ωì„ÅÆ„ÉÜ„Ç≠„Çπ„Éà„Ç´„É©„Éº */
body {
    color: var(--cyber-text);
}

/* ÂÖ±ÈÄö„ÅÆ„Ç´„Éº„Éâ„Çπ„Çø„Ç§„É´ */
.card {
    background-color: var(--cyber-background);
    border: 2px solid;
    border-radius: 8px;
    color: var(--cyber-text);  /* „Ç´„Éº„ÉâÂÜÖ„ÅÆ„ÉÜ„Ç≠„Çπ„Éà„Ç´„É©„Éº */
}

/* „Éï„Ç©„Éº„É†Ë¶ÅÁ¥†„ÅÆÂÖ±ÈÄö„Çπ„Çø„Ç§„É´ */
.form-control, 
.form-select,
.form-check-input {
    background-color: rgba(26, 26, 26, 0.95) !important;
    border: 2px solid var(--cyber-yellow) !important;
    color: var(--cyber-yellow) !important;
}

/* „Éï„Ç©„Éº„Ç´„ÇπÊôÇ„ÅÆ„Çπ„Çø„Ç§„É´ */
.form-control:focus,
.form-select:focus,
.form-check-input:focus {
    border-color: var(--cyber-yellow) !important;
    box-shadow: 0 0 10px var(--cyber-yellow) !important;
}

/* „ÉÅ„Çß„ÉÉ„ÇØ„Éú„ÉÉ„ÇØ„Çπ„ÅÆ„Çπ„Çø„Ç§„É´ */
.form-check-input:checked {
    background-color: var(--cyber-yellow) !important;
    border-color: var(--cyber-yellow) !important;
}

/* Âü∫Êú¨ÊÉÖÂ†±„Çª„ÇØ„Ç∑„Éß„É≥ */
#basic-info-card.card,
#basic-info-card.card.border-0 {
    background-color: var(--cyber-background) !important;
    border: 2px solid var(--cyber-yellow) !important;
    border-radius: 8px !important;
    color: var(--cyber-yellow) !important;
    margin-bottom: 1rem !important;
}

#basic-section .form-label,
#basic-section .form-check-label {
    color: var(--cyber-yellow);
}

#basic-section .form-control,
#basic-section .form-select {
    color: var(--cyber-yellow);
    border-color: var(--cyber-yellow);
}

/* „Ç¢„Éó„É™„ÅÆÈ≠ÖÂäõ„Çª„ÇØ„Ç∑„Éß„É≥ */
#appeal .card,
#appeal .card.border-0 {
    background-color: var(--cyber-background) !important;
    border: 2px solid var(--cyber-green) !important;
    border-radius: 8px !important;
    color: var(--cyber-green) !important;
}

#appeal .form-control, 
#appeal .form-select,
#appeal .form-check-input {
    background-color: rgba(26, 26, 26, 0.95) !important;
    border: 2px solid var(--cyber-green) !important;
    color: var(--cyber-green) !important;
}

#appeal .form-label,
#appeal .form-check-label {
    color: var(--cyber-green) !important;
}

#appeal .form-control:focus,
#appeal .form-select:focus {
    border-color: var(--cyber-green) !important;
    box-shadow: 0 0 10px var(--cyber-green) !important;
}

/* „Éó„É¨„Éº„Çπ„Éõ„É´„ÉÄ„Éº„ÅÆ„Çπ„Çø„Ç§„É´ */
::placeholder {
    color: rgba(255, 255, 255, 0.5) !important;
}

/* „Çµ„Ç§„Éê„Éº„Éë„É≥„ÇØ„Å™„Çπ„Çø„Ç§„É´ */
.text-cyber-yellow {
    color: var(--cyber-yellow) !important;
    text-shadow: 0 0 5px var(--cyber-yellow);
}

/* „ÉÅ„Çß„ÉÉ„ÇØ„Éú„ÉÉ„ÇØ„Çπ„ÅÆËâ≤„ÇíÈªÑËâ≤„Å´„ÄÅ„ÉÅ„Çß„ÉÉ„ÇØ„Éû„Éº„ÇØ„ÅØÈªí„Å´ */
.form-check-input:checked {
    background-color: var(--cyber-yellow) !important;
    border-color: var(--cyber-yellow) !important;
    box-shadow: 0 0 5px var(--cyber-yellow);
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20'%3e%3cpath fill='none' stroke='%23000' stroke-linecap='round' stroke-linejoin='round' stroke-width='3' d='m6 10 3 3 6-6'/%3e%3c/svg%3e") !important;
}

.form-check-input:focus {
    border-color: var(--cyber-yellow);
    box-shadow: 0 0 5px var(--cyber-yellow);
}

/* Êú™„ÉÅ„Çß„ÉÉ„ÇØÊôÇ„ÅÆ„Éú„Éº„ÉÄ„Éº„ÇÇÈªÑËâ≤„Å´ */
.form-check-input {
    border-color: var(--cyber-yellow);
}

/* „ÉÅ„Çß„ÉÉ„ÇØ„Éú„ÉÉ„ÇØ„Çπ„ÅåÁÑ°Âäπ„Åß„ÉÅ„Çß„ÉÉ„ÇØÊ∏à„Åø„ÅÆÂ†¥Âêà„ÅÆ„Çπ„Çø„Ç§„É´„Çí‰øÆÊ≠£ */
.cyber-checkbox:disabled:checked {
    background-color: var(--cyber-yellow) !important;
    border-color: var(--cyber-yellow) !important;
    box-shadow: 0 0 15px var(--cyber-yellow);
    opacity: 1 !important;
}

/* „ÉÅ„Çß„ÉÉ„ÇØ„Éú„ÉÉ„ÇØ„Çπ„ÅåÁÑ°Âäπ„Åß„ÉÅ„Çß„ÉÉ„ÇØÊ∏à„Åø„ÅÆÂ†¥Âêà„ÅÆ„É©„Éô„É´„Çí‰øÆÊ≠£ */
.cyber-checkbox:disabled:checked + .form-check-label {
    color: var(--cyber-yellow) !important;
    text-shadow: 0 0 5px var(--cyber-yellow);
    font-weight: bold;
    opacity: 1 !important;
    letter-spacing: 0.5px;
}

/* ÁÑ°ÂäπÂåñ„Åï„Çå„Åü„ÉÅ„Çß„ÉÉ„ÇØ„Éú„ÉÉ„ÇØ„Çπ„ÅÆ„É©„Éô„É´„ÇÇË¶ã„ÇÑ„Åô„Åè */
.cyber-checkbox:disabled + .form-check-label {
    opacity: 1 !important;
    color: var(--cyber-yellow) !important;
}

/* ‰øùÂ≠ò„Éú„Çø„É≥„ÅÆ„Çπ„Çø„Ç§„É´ */
.btn-cyber-save {
    background: rgba(0, 255, 159, 0.1);  /* Á∑ëËâ≤„ÅÆ„Çπ„Ç±„É´„Éà„É≥ËÉåÊôØ */
    color: #00ff9f;  /* „Çµ„Ç§„Éê„ÉºÁ∑ëËâ≤„ÅÆ„ÉÜ„Ç≠„Çπ„Éà */
    border: 2px solid #00ff9f;  /* Á∑ëËâ≤„ÅÆ„Éú„Éº„ÉÄ„Éº */
    text-shadow: 0 0 5px #00ff9f;  /* „ÉÜ„Ç≠„Çπ„Éà„ÅÆÂÖâ„ÇãÂäπÊûú */
    padding: 10px 30px;
    font-weight: bold;
    transition: all 0.3s ease;
    border-radius: 25px;
    box-shadow: 0 0 15px rgba(0, 255, 159, 0.3);  /* Á∑ëËâ≤„ÅÆÂÖâ„ÇãÂäπÊûú */
    font-size: 1.1rem;
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
}

.btn-cyber-save:hover {
    background: rgba(0, 255, 159, 0.2);  /* „Éõ„Éê„ÉºÊôÇ„ÅØÂ∞ë„ÅóÊøÉ„Åè */
    box-shadow: 0 0 20px rgba(0, 255, 159, 0.5);  /* „Éõ„Éê„ÉºÊôÇ„ÅØÂÖâ„Çí„Çà„ÇäÂº∑„Åè */
    transform: translateY(-2px);
}

.btn-cyber-save:active {
    transform: translateY(1px);
}

/* „Éú„Çø„É≥„Ç∞„É´„Éº„Éó„ÅÆ„Ç≥„É≥„ÉÜ„Éä */
.bottom-button-group {
    position: fixed;
    bottom: 20px;
    left: 0;
    right: 0;
    display: flex;
    justify-content: space-between;
    padding: 0 20px;
    z-index: 1000;
}

/* ÂêÑ„Éú„Çø„É≥„Ç≥„É≥„ÉÜ„Éä */
.button-container {
    flex: 1;
    display: flex;
    justify-content: center;
    max-width: 250px;
}

/* Â∑¶„ÅÆ„Éú„Çø„É≥„Ç≥„É≥„ÉÜ„Éä */
.button-container:first-child {
    justify-content: flex-start;
}

/* Âè≥„ÅÆ„Éú„Çø„É≥„Ç≥„É≥„ÉÜ„Éä */
.button-container:last-child {
    justify-content: flex-end;
}

/* „Çπ„ÉÜ„Éº„Çø„Çπ„Éê„ÉÉ„Ç∏„ÅÆ„Çπ„Çø„Ç§„É´ */
.status-badge {
    display: inline-flex;  /* „Ç§„É≥„É©„Ç§„É≥„Éï„É¨„ÉÉ„ÇØ„Çπ„Å´Â§âÊõ¥ */
    align-items: center;   /* „Ç¢„Ç§„Ç≥„É≥„Å®ÊñáÂ≠ó„Çí‰∏≠Â§ÆÊèÉ„Åà */
    padding: 8px 25px;
    border-radius: 25px;
    font-weight: bold;
    background: rgba(0, 255, 159, 0.1);  /* „Çπ„Ç±„É´„Éà„É≥ËÉåÊôØ */
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
}

/* Á∑®ÈõÜ„É¢„Éº„ÉâÊôÇ„ÅÆ„Çπ„ÉÜ„Éº„Çø„ÇπË°®Á§∫ */
.status-badge.editing-status {
    color: #00ff9f;
    border: 2px solid #00ff9f;
    text-shadow: 0 0 5px #00ff9f;
    box-shadow: 0 0 15px rgba(0, 255, 159, 0.3);
}

/* „Ç¢„Ç§„Ç≥„É≥„ÅÆ„Çπ„Çø„Ç§„É´ */
.status-badge i {
    margin-right: 8px;  /* „Ç¢„Ç§„Ç≥„É≥„Å®ÊñáÂ≠ó„ÅÆÈñìÈöî„ÇíË™øÊï¥ */
}

/* Ë©≥Á¥∞„É¢„Éº„ÉâÊôÇ„ÅÆ„Çπ„ÉÜ„Éº„Çø„ÇπË°®Á§∫ */
.status-badge.viewing-status {
    color: #00ffff;
    border: 2px solid #00ffff;
    text-shadow: 0 0 5px #00ffff;
    box-shadow: 0 0 15px rgba(0, 255, 255, 0.3);
    background: #000000;  /* ÈªíÂú∞„ÅÆËÉåÊôØ„ÇíÊòéÁ§∫ÁöÑ„Å´ÊåáÂÆö */
}

/* Êó¢Â≠ò„ÅÆ„Éú„Çø„É≥„Çπ„Çø„Ç§„É´ */
.btn-cyber-mode-switch {
    padding: 10px 20px;
    border-radius: 25px;
    font-weight: bold;
    text-decoration: none;
}

/* Ë©≥Á¥∞„Å∏„Éú„Çø„É≥ - ÈùíËâ≤ */
#btn-to-detail {
    background: rgba(0, 255, 255, 0.1);
    color: #00ffff;
    border: 2px solid #00ffff;
    text-shadow: 0 0 5px #00ffff;
    box-shadow: 0 0 15px rgba(0, 255, 255, 0.3);
}

#btn-to-detail:hover {
    background: rgba(0, 255, 255, 0.2);
    color: #00ffff;
    transform: translateY(-2px);
}

/* Á∑®ÈõÜ„Å∏„Éú„Çø„É≥ - Á∑ëËâ≤ */
#btn-to-edit {
    background: rgba(0, 255, 159, 0.1);
    color: #00ff9f;
    border: 2px solid #00ff9f;
    text-shadow: 0 0 5px #00ff9f;
    box-shadow: 0 0 15px rgba(0, 255, 159, 0.3);
}

#btn-to-edit:hover {
    background: rgba(0, 255, 159, 0.2);
    color: #00ff9f;
    transform: translateY(-2px);
}

/* ÊäÄË°ìÂü∫Áõ§Á∑®„Çø„Éñ */
.nav-link[href*="technical_edit"] {
    color: var(--cyber-blue) !important;
    text-shadow: 0 0 5px var(--cyber-blue), 0 0 10px var(--cyber-blue);
}

.nav-link[href*="technical_edit"]:hover {
    background-color: rgba(0, 255, 255, 0.1) !important;
}

/* ÊäÄË°ìÂü∫Áõ§Á∑®„Å∏„ÅÆÈÅ∑Áßª„Éú„Çø„É≥ */
.technical-transition-btn {
    color: var(--cyber-blue) !important;
    text-shadow: 0 0 5px var(--cyber-blue) !important;
    transition: all 0.3s ease;
    background: rgba(0, 255, 255, 0.1) !important;
    border: 1px solid rgba(0, 255, 255, 0.3) !important;
}

.technical-transition-btn:hover {
    background: rgba(0, 255, 255, 0.2) !important;
    transform: translateY(-1px);
    box-shadow: 0 0 10px rgba(0, 255, 255, 0.2);
}

/* „Ç∞„É™„ÉÉ„ÉÅ„Ç®„Éï„Çß„ÇØ„Éà„ÇíÂâäÈô§ */
.cyber-glitch-effect {
    display: none;
}

/* „Ç¢„Ç§„Ç≥„É≥„ÅÆ„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥ */
.technical-transition-btn i {
    margin-right: 0.5rem;
    animation: bounce 1s infinite;
}

@keyframes bounce {
    0%, 100% {
        transform: translateX(0);
    }
    50% {
        transform: translateX(3px);
    }
}

/* „É¨„Çπ„Éù„É≥„Ç∑„ÉñÂØæÂøú */
@media (max-width: 768px) {
    .technical-transition-btn {
        margin-top: 0.5rem !important;
        margin-left: 0 !important;
    }
}

/* „ÉÄ„Ç§„Ç¢„É≠„Ç∞„ÅÆ„Çπ„Çø„Ç§„É´„Çí‰øÆÊ≠£ */
.cyber-dialog-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.8);
    display: none;
    z-index: 9999;
    backdrop-filter: blur(5px);
}

.cyber-dialog {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: rgba(13, 25, 45, 0.95);
    border: 2px solid var(--cyber-yellow);
    box-shadow: 0 0 20px var(--cyber-yellow);
    padding: 20px;
    border-radius: 10px;
    max-width: 500px;
    width: 90%;
}

.cyber-dialog-content {
    color: var(--cyber-yellow);
    text-align: center;
}

.cyber-message {
    margin-bottom: 20px;
}

.message-icon {
    font-size: 2em;
    margin-bottom: 10px;
    color: var(--cyber-yellow);
}

.message-text {
    font-size: 1.1em;
    line-height: 1.4;
    text-shadow: 0 0 5px var(--cyber-yellow);
}

.cyber-dialog-buttons {
    display: flex;
    justify-content: center;
    gap: 10px;
    margin-top: 20px;
}

.cyber-button {
    padding: 8px 16px;
    border: 1px solid var(--cyber-yellow);
    background: transparent;
    color: var(--cyber-yellow);
    cursor: pointer;
    text-decoration: none;
    transition: all 0.3s;
    text-shadow: 0 0 5px var(--cyber-yellow);
    position: relative;
    overflow: hidden;
}

.cyber-button:hover {
    background: var(--cyber-yellow);
    color: #000;
    box-shadow: 0 0 10px var(--cyber-yellow);
}

.button-glitch {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: transparent;
    border: 1px solid var(--cyber-yellow);
    animation: glitch 2s infinite;
    opacity: 0;
    pointer-events: none;
}

@keyframes glitch {
    0% { clip-path: inset(80% -6px 0 0); transform: translate(-10px, -10px); }
    10% { clip-path: inset(10% -6px 85% 0); transform: translate(10px, 10px); }
    20% { clip-path: inset(80% -6px 0 0); transform: translate(-10px, 10px); }
    30% { clip-path: inset(10% -6px 85% 0); transform: translate(0px, -10px); }
    40% { clip-path: inset(50% -6px 30% 0); transform: translate(-10px, 0px); }
    50% { clip-path: inset(0% -6px 70% 0); transform: translate(10px, -10px); }
    60% { clip-path: inset(70% -6px 10% 0); transform: translate(-10px, 10px); }
    70% { clip-path: inset(20% -6px 60% 0); transform: translate(10px, 0px); }
    80% { clip-path: inset(60% -6px 20% 0); transform: translate(-10px, -10px); }
    90% { clip-path: inset(30% -6px 50% 0); transform: translate(0px, 10px); }
    100% { clip-path: inset(80% -6px 0 0); transform: translate(10px, -10px); }
}

/* „Çµ„Ç§„Éâ„Éä„Éì„Ç≤„Éº„Ç∑„Éß„É≥„Éú„Çø„É≥„ÅÆ„Çπ„Çø„Ç§„É´ */
.side-nav-button {
    position: fixed;
    top: 50%;
    transform: translateY(-50%);
    z-index: 1000;
}

.left-nav {
    left: 20px;
}

.right-nav {
    right: 20px;
}

.btn-cyber-nav {
    display: inline-flex;
    align-items: center;
    padding: 10px 20px;
    background: rgba(0, 255, 159, 0.1);  /* „Çπ„Ç±„É´„Éà„É≥ËÉåÊôØ */
    border: 2px solid #00ff9f;  /* „Éú„Éº„ÉÄ„Éº„ÇíÂ∞ë„ÅóÂ§™„Åè */
    color: #00ff9f;
    text-decoration: none;
    border-radius: 25px;  /* „Çà„Çä‰∏∏„Åø„ÇíÊåÅ„Åü„Åõ„Çã */
    transition: all 0.3s ease;
    box-shadow: 0 0 10px rgba(0, 255, 159, 0.3);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    font-weight: bold;  /* „ÉÜ„Ç≠„Çπ„Éà„ÇíÂ§™„Åè */
    text-shadow: 0 0 5px #00ff9f;  /* „ÉÜ„Ç≠„Çπ„Éà„ÇíÂÖâ„Çâ„Åõ„Çã */
}

.btn-cyber-nav:hover {
    background: rgba(0, 255, 159, 0.2);
    color: #fff;
    box-shadow: 0 0 20px rgba(0, 255, 159, 0.5);
    transform: scale(1.05);
    text-decoration: none;
}

/* „Éõ„Éê„ÉºÊôÇ„ÅÆ„Ç∞„É™„ÉÉ„ÉÅ„Ç®„Éï„Çß„ÇØ„Éà */
.btn-cyber-nav:hover::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 255, 159, 0.2);  /* Á∑ëËâ≤„Å´Â§âÊõ¥ */
    animation: glitch 0.3s infinite;
}

@keyframes glitch {
    0% { transform: translate(0); }
    20% { transform: translate(-2px, 2px); }
    40% { transform: translate(-2px, -2px); }
    60% { transform: translate(2px, 2px); }
    80% { transform: translate(2px, -2px); }
    100% { transform: translate(0); }
}

/* Êñ∞„Åó„ÅÑ„Éú„Çø„É≥„ÅÆ„Éõ„Éê„Éº„Çπ„Çø„Ç§„É´ */
.btn-cyber-secondary:hover {
    opacity: 1 !important;
    box-shadow: 0 0 20px var(--cyber-green);
    border-color: var(--cyber-green) !important;
    background-color: rgba(0, 255, 159, 0.1) !important;
}

/* PC„Åß„ÅÆ„Åø„ÉÜ„Ç≠„Çπ„Éà„ÇíË°®Á§∫ */
@media (min-width: 768px) {
    .btn-cyber-secondary {
        padding-left: 20px !important;
        padding-right: 20px !important;
    }
}

/* „Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥ÂäπÊûú */
.btn-cyber-secondary {
    position: relative;
    overflow: hidden;
}

.btn-cyber-secondary::after {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: linear-gradient(
        to bottom right,
        rgba(0, 255, 159, 0.1),
        transparent,
        rgba(0, 255, 159, 0.1)
    );
    transform: rotate(45deg);
    animation: cyber-shine 3s infinite;
}

@keyframes cyber-shine {
    0% {
        transform: translateX(-100%) rotate(45deg);
    }
    100% {
        transform: translateX(100%) rotate(45deg);
    }
}

/* „ÉÑ„Éº„É´„ÉÅ„ÉÉ„Éó„ÅÆ„Ç´„Çπ„Çø„Éû„Ç§„Ç∫ */
.tooltip {
    position: fixed !important;
}

.tooltip .tooltip-inner {
    background-color: rgba(0, 0, 0, 0.8);
    border: 1px solid var(--cyber-green);
    color: var(--cyber-green);
    box-shadow: 0 0 10px rgba(0, 255, 159, 0.3);
    font-size: 14px;
    padding: 8px 12px;
    max-width: 200px;  /* ÂπÖ„ÇíÂà∂Èôê */
    margin-right: 10px;  /* Âè≥ÂÅ¥„ÅÆ‰ΩôÁôΩ„ÇíËøΩÂä† */
}

/* „Çπ„Éû„ÉõÂêë„Åë„ÅÆË™øÊï¥ */
@media (max-width: 768px) {
    .tooltip {
        margin-right: 70px !important;  /* „Çπ„Éû„Éõ„Åß„ÅØÂè≥ÂÅ¥„Å´„Çà„ÇäÂ§ß„Åç„Å™‰ΩôÁôΩ */
    }
}

/* „É¢„Éº„ÉÄ„É´„ÅÆ„Çπ„Çø„Ç§„É´ */
.modal-content {
    box-shadow: 0 0 20px rgba(0, 255, 159, 0.3);
}

.btn-cyber-green:hover {
    background-color: rgba(0, 255, 159, 0.8) !important;
    box-shadow: 0 0 15px var(--cyber-green);
}

.btn-outline-cyber:hover {
    background-color: rgba(0, 255, 159, 0.2);
    color: var(--cyber-green) !important;
    border-color: var(--cyber-green) !important;
    box-shadow: 0 0 15px rgba(0, 255, 159, 0.3);
}

/* „É¢„Éº„ÉÄ„É´„ÅÆ„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥ */
.modal.fade .modal-dialog {
    transition: transform 0.3s ease-out;
    transform: scale(0.9);
}

.modal.show .modal-dialog {
    transform: scale(1);
}

/* „É¢„Éº„ÉÄ„É´„ÅÆËÉåÊôØ„Çí„Çà„ÇäÊöó„Åè */
.modal-backdrop.show {
    opacity: 0.8;
}

/* „Çπ„ÉÜ„Éº„Çø„Çπ„Éê„ÉÉ„Ç∏„ÅÆ„Éõ„Éê„Éº„Ç®„Éï„Çß„ÇØ„Éà */
.status-badge {
    transition: all 0.3s ease;
}

.status-badge:hover {
    box-shadow: 0 0 15px var(--cyber-green);
}

/* ‰øùÂ≠ò„Éú„Çø„É≥„ÅÆ„Éõ„Éê„Éº„Ç®„Éï„Çß„ÇØ„Éà */
.btn-cyber-save {
    transition: all 0.3s ease;
}

.btn-cyber-save:hover {
    box-shadow: 0 0 15px var(--cyber-green);
    transform: translateY(-2px);
}

/* Ë©≥Á¥∞Ë°®Á§∫ÊôÇ„ÅÆ„Çπ„Çø„Ç§„É´ */
.viewing-status {
    color: var(--cyber-green);
    text-shadow: 0 0 5px var(--cyber-green);
}

/* Á∑®ÈõÜ‰∏≠Ë°®Á§∫ÊôÇ„ÅÆ„Çπ„Çø„Ç§„É´ */
.editing-status {
    color: var(--cyber-green);
    text-shadow: 0 0 5px var(--cyber-green);
}

/* Âü∫Êú¨„ÉÄ„Ç§„Ç¢„É≠„Ç∞Áî®„ÅÆÁã¨Ëá™„Çπ„Çø„Ç§„É´ */
.basic-dialog-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.7);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 9999;
}

.basic-dialog {
    background: rgba(0, 20, 40, 0.9);
    border: 2px solid #ffd700;  /* ÈªÑËâ≤„ÅÆ„Éú„Éº„ÉÄ„Éº */
    border-radius: 10px;
    padding: 20px;
    box-shadow: 0 0 20px rgba(255, 215, 0, 0.3);  /* ÈªÑËâ≤„ÅÆÂÖâ„ÇãÂäπÊûú */
    max-width: 500px;
    width: 90%;
    position: absolute;  /* ËøΩÂä† */
    top: 50%;           /* ËøΩÂä† */
    left: 50%;          /* ËøΩÂä† */
    transform: translate(-50%, -50%);  /* ËøΩÂä† */
}

.basic-dialog-content {
    text-align: center;
}

.basic-message {
    margin-bottom: 20px;
    color: #ffd700;  /* ÈªÑËâ≤„ÅÆ„ÉÜ„Ç≠„Çπ„Éà */
    text-shadow: 0 0 5px #ffd700;  /* ÈªÑËâ≤„ÅÆÂÖâ„ÇãÂäπÊûú */
}

.basic-dialog-buttons {
    display: flex;
    justify-content: center;
    gap: 10px;
}

.basic-button {
    background: rgba(255, 215, 0, 0.1);  /* ÈªÑËâ≤„ÅÆËÉåÊôØ */
    border: 2px solid #ffd700;  /* ÈªÑËâ≤„ÅÆ„Éú„Éº„ÉÄ„Éº */
    color: #ffd700;  /* ÈªÑËâ≤„ÅÆ„ÉÜ„Ç≠„Çπ„Éà */
    padding: 10px 20px;
    border-radius: 5px;
    cursor: pointer;
    transition: all 0.3s;
}

.basic-button:hover {
    background: rgba(255, 215, 0, 0.2);  /* „Éõ„Éê„ÉºÊôÇ„ÅØÂ∞ë„ÅóÊøÉ„ÅÑÈªÑËâ≤ */
    transform: translateY(-2px);
    box-shadow: 0 0 10px rgba(255, 215, 0, 0.3);  /* ÈªÑËâ≤„ÅÆÂÖâ„ÇãÂäπÊûú */
}

/* „Ç¢„Éó„É™„ÅÆÈ≠ÖÂäõ„Çª„ÇØ„Ç∑„Éß„É≥ */
#appeal .input-group-text {
    background-color: rgba(0, 20, 50, 0.8) !important;
    color: var(--cyber-green) !important;
    border: 2px solid var(--cyber-green) !important;
    border-right: none !important;
}

#appeal .input-group .form-control {
    border-left: none !important;
    border-color: var(--cyber-green) !important;
    color: var(--cyber-green) !important;
}

#appeal .card h2,
#appeal .card i.bi,
#appeal .form-label,
#appeal .form-text {
    color: var(--cyber-green) !important;
}

#appeal .form-control {
    border-color: var(--cyber-green) !important;
    color: var(--cyber-green) !important;
}

/* Âü∫Êú¨ÊÉÖÂ†±„Çª„ÇØ„Ç∑„Éß„É≥„ÅØÈªÑËâ≤„ÅÆ„Åæ„Åæ */
#basic-info-card.card,
#basic-info-card.card.border-0 {
    background-color: var(--cyber-background) !important;
    border: 2px solid var(--cyber-yellow) !important;
    border-radius: 8px !important;
    color: var(--cyber-yellow) !important;
    margin-bottom: 1rem !important;
}

/* „Ç¢„Éó„É™„ÅÆÈ≠ÖÂäõ„Çª„ÇØ„Ç∑„Éß„É≥ */
#appeal {
    border-bottom: none !important;  /* ‰∏ãÁ∑ö„ÇíÊòéÁ§∫ÁöÑ„Å´ÂâäÈô§ */
    padding-bottom: 0 !important;    /* ‰∏ãÈÉ®„Éë„Éá„Ç£„É≥„Ç∞„ÇÇÂâäÈô§ */
}

/* „Çø„ÉñÂÜÖ„ÅÆ„Ç´„Éº„ÉâÂπÖ„ÇíÁµ±‰∏Ä */
.container {
    max-width: 1200px !important;
    margin: 0 auto !important;
}

.container .card {
    width: 100% !important;
    margin: 0 auto !important;
}

/* „Ç´„Éº„Éâ„Éú„Éá„Ç£„ÅÆ‰ΩôÁôΩ„ÇíÁµ±‰∏Ä */
.card-body {
    padding: 2rem !important;
}

/* „Çπ„ÇØ„É™„Éº„É≥„Ç∑„Éß„ÉÉ„Éà„Çø„Éñ„ÅÆË™øÊï¥ */
.screenshots-container {
    width: 100% !important;
}

/* „Ç¢„Éî„Éº„É´„Çø„Éñ„ÅÆË™øÊï¥ */
#appeal-section .card,
#appeal-section .form-control {
    width: 100% !important;
}

/* „Çπ„ÇØ„É™„Éº„É≥„Ç∑„Éß„ÉÉ„Éà„Çø„Éñ„ÅÆ„Çø„Ç§„Éà„É´ÊñáÂ≠ó„Çí‰ªñ„ÅÆ„Çø„Éñ„Å®Âêà„Çè„Åõ„Çã */
.card-title {
    font-size: 1.5rem !important;
    margin-bottom: 1.5rem !important;
    text-shadow: 0 0 10px var(--cyber-pink),
                 0 0 20px var(--cyber-pink) !important;
    font-weight: bold !important;
    color: var(--cyber-pink) !important;  /* Âë®„Çä„ÅÆË¶ÅÁ¥†„Å®Âêå„Åò„Éî„É≥„ÇØËâ≤„Å´Â§âÊõ¥ */
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('appForm');
    const toastEl = document.getElementById('liveToast');
    
    // „Éà„Éº„Çπ„Éà„ÅÆ„Ç™„Éó„Ç∑„Éß„É≥„ÇíË®≠ÂÆö
    const toastOptions = {
        animation: true,
        autohide: true,  // Ëá™Âãï„ÅßÈùûË°®Á§∫
        delay: 2000      // 2ÁßíÂæå„Å´Ê∂à„Åà„Çã
    };
    
    // Bootstrap„Éà„Éº„Çπ„Éà„ÅÆÂàùÊúüÂåñ
    const toast = new bootstrap.Toast(toastEl, toastOptions);

    // ÊàêÂäü„É°„ÉÉ„Çª„Éº„Ç∏„ÅÆ„Éë„É©„É°„Éº„Çø„ÅåURL„Å´„ÅÇ„ÇãÂ†¥Âêà„ÅÆ„Åø„Éà„Éº„Çπ„Éà„ÇíË°®Á§∫
    const urlParams = new URLSearchParams(window.location.search);
    if (urlParams.has('success')) {
        // „Éà„Éº„Çπ„Éà„ÇíË°®Á§∫
        toast.show();
        
        // URL„Åã„Çâsuccess=true„Éë„É©„É°„Éº„Çø„ÇíÂâäÈô§
        window.history.replaceState({}, '', window.location.pathname);
        
        // 2ÁßíÂæå„Å´Âº∑Âà∂ÁöÑ„Å´ÈùûË°®Á§∫
        setTimeout(() => {
            toast.hide();
            // DOM„Åã„Çâ„Éà„Éº„Çπ„ÉàË¶ÅÁ¥†„ÇíÂÆåÂÖ®„Å´ÂâäÈô§
            toastEl.remove();
        }, 2000);
    }

    if (form) {
        form.addEventListener('submit', function(e) {
            // „Éï„Ç©„Éº„É†„ÅÆÈÄöÂ∏∏„ÅÆÈÄÅ‰ø°„ÇíË®±ÂèØ
            return true;
        });
    }

    // „Éö„Éº„Ç∏„É≠„Éº„ÉâÊôÇ„Å´„Ç≠„É£„ÉÉ„Ç∑„É•„Çí„ÇØ„É™„Ç¢
    if (window.performance && window.performance.navigation.type === window.performance.navigation.TYPE_BACK_FORWARD) {
        window.location.reload(true);  // Âº∑Âà∂ÁöÑ„Å´„Éö„Éº„Ç∏„ÇíÂÜçË™≠„ÅøËæº„Åø
    }
});

// „Éê„ÉÉ„ÇØ„Éï„Ç©„ÉØ„Éº„Éâ„Ç≠„É£„ÉÉ„Ç∑„É•ÂØæÁ≠ñ„ÇíÂº∑Âåñ
window.addEventListener('pageshow', function(event) {
    if (event.persisted || 
        (window.performance && 
         window.performance.navigation.type === window.performance.navigation.TYPE_BACK_FORWARD)) {
        window.location.reload(true);  // „Ç≠„É£„ÉÉ„Ç∑„É•„ÇíÁÑ°Ë¶ñ„Åó„Å¶ÂÜçË™≠„ÅøËæº„Åø
    }
});

// „Éï„Ç©„Éº„É†„ÅÆÈùûÂêåÊúü‰øùÂ≠òÂá¶ÁêÜ
async function handleFormSubmit(event) {
    event.preventDefault();
    
    const form = document.getElementById('appForm');
    const formData = new FormData(form);
    const submitButton = document.querySelector('.btn-cyber-save');
    
    // ‰øùÂ≠ò„Éú„Çø„É≥„ÇíÁÑ°ÂäπÂåñ
    if (submitButton) {
        submitButton.disabled = true;
    }

    try {
        const response = await fetch(form.action, {
            method: 'POST',
            body: formData,
            headers: {
                'X-CSRFToken': getCookie('csrftoken'),
                'X-Requested-With': 'XMLHttpRequest'
            }
        });

        const data = await response.json();

        if (response.ok) {
            showToast('‰øùÂ≠ò„Åó„Åæ„Åó„Åü', 'success');
            
            // Êñ∞Ë¶è‰ΩúÊàêÊôÇ„ÅØedit„Éö„Éº„Ç∏„Å∏„É™„ÉÄ„Ç§„É¨„ÇØ„Éà
            if (!formData.get('app_id') && data.app_id) {
                window.location.href = `/apps_gallery/edit/${data.app_id}/`;
            }
        } else {
            throw new Error(data.error || '‰øùÂ≠ò„Å´Â§±Êïó„Åó„Åæ„Åó„Åü');
        }
    } catch (error) {
        showToast(error.message, 'error');
    } finally {
        // ‰øùÂ≠ò„Éú„Çø„É≥„ÇíÂÜçÂ∫¶ÊúâÂäπÂåñ
        if (submitButton) {
            submitButton.disabled = false;
        }
    }
}

// „Ç§„Éô„É≥„Éà„É™„Çπ„Éä„Éº„ÅÆË®≠ÂÆö
document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('appForm');
    if (form) {
        form.addEventListener('submit', handleFormSubmit);
    }
});

// ÊäÄË°ì„Å∏„Éú„Çø„É≥„ÅÆ„ÇØ„É™„ÉÉ„ÇØÊôÇ„ÅÆÂá¶ÁêÜ„ÇíÊù°‰ª∂ÂàÜÂ≤ê
async function confirmTechTransition(event) {
    event.preventDefault();
    console.log('confirmTechTransition called');
    
    const link = event.currentTarget;
    const form = document.getElementById('appForm');
    const isEdit = form !== null;
    
    if (isEdit) {
        const modal = new bootstrap.Modal(document.getElementById('techConfirmModal'));
        modal.show();
        
        document.getElementById('saveTechButton').onclick = async function() {
            try {
                console.log('Saving form data...');
                const formData = new FormData(form);
                formData.append('next_url', link.href);  // ÈÅ∑ÁßªÂÖàURL„ÇíËøΩÂä†
                
                const response = await fetch(form.action, {
                    method: 'POST',
                    body: formData,
                    headers: {
                        'X-CSRFToken': getCookie('csrftoken'),
                        'X-Requested-With': 'XMLHttpRequest'
                    },
                    credentials: 'same-origin'
                });

                const data = await response.json();
                console.log('Save response:', data);
                
                if (data.success) {
                    window.location.href = data.redirect_url || link.href;
                } else {
                    throw new Error(data.error || '‰øùÂ≠ò„Å´Â§±Êïó„Åó„Åæ„Åó„Åü');
                }
            } catch (error) {
                console.error('Error:', error);
                alert('‰øùÂ≠ò‰∏≠„Å´„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Åæ„Åó„ÅüÔºö' + error.message);
            }
            modal.hide();
        };
    } else {
        window.location.href = link.href;
    }
}

// CSRF„Éà„Éº„ÇØ„É≥„ÇíÂèñÂæó„Åô„ÇãÈñ¢Êï∞
function getCookie(name) {
    let cookieValue = null;
    if (document.cookie && document.cookie !== '') {
        const cookies = document.cookie.split(';');
        for (let i = 0; i < cookies.length; i++) {
            const cookie = cookies[i].trim();
            if (cookie.substring(0, name.length + 1) === (name + '=')) {
                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                break;
            }
        }
    }
    return cookieValue;
}
</script>

<!-- Bootstrap„ÅÆ„Çπ„ÇØ„É™„Éó„Éà„ÅåË™≠„ÅøËæº„Åæ„Çå„Å¶„ÅÑ„Çã„Åì„Å®„ÇíÁ¢∫Ë™ç -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    if (typeof bootstrap === 'undefined') {
        console.error('Bootstrap„ÅåË™≠„ÅøËæº„Åæ„Çå„Å¶„ÅÑ„Åæ„Åõ„ÇìÔºÅ');
        return;
    }

    // app.id„ÅåÂ≠òÂú®„Åô„ÇãÂ†¥Âêà„ÅÆ„Åø„É¢„Éº„ÉÄ„É´Èñ¢ÈÄ£„ÅÆÂá¶ÁêÜ„ÇíÂÆüË°å
    const saveTechButton = document.getElementById('saveTechButton');
    if (saveTechButton && '{{ app.id }}') {
        const modalEl = document.getElementById('techConfirmModal');
        const modal = new bootstrap.Modal(modalEl);
        
        // „Ç≠„É£„É≥„Çª„É´„Éú„Çø„É≥„ÅÆ„Ç§„Éô„É≥„Éà„É™„Çπ„Éä„Éº
        document.querySelector('.cancel-btn').addEventListener('click', function() {
            modal.hide();
        });

        saveTechButton.addEventListener('click', async function() {
            const form = document.getElementById('appForm');
            const isReadOnly = {% if readonly %}true{% else %}false{% endif %};
            const techUrl = "{% if app.id %}{% if readonly %}{% url 'apps_gallery:technical_detail' app.id %}{% else %}{% url 'apps_gallery:technical_edit' app.id %}{% endif %}{% endif %}";
            
            if (isReadOnly) {
                // Ë©≥Á¥∞Ë°®Á§∫„É¢„Éº„Éâ„ÅÆÂ†¥Âêà„ÅØÁõ¥Êé•ÈÅ∑Áßª
                window.location.href = techUrl;
            } else {
                // Á∑®ÈõÜ„É¢„Éº„Éâ„ÅÆÂ†¥Âêà„ÅØ‰øùÂ≠ò„Åó„Å¶„Åã„ÇâÈÅ∑Áßª
                if (form) {
                    const formData = new FormData(form);
                    
                    try {
                        const response = await fetch(form.action, {
                            method: 'POST',
                            body: formData,
                            headers: {
                                'X-CSRFToken': getCookie('csrftoken'),
                                'X-Requested-With': 'XMLHttpRequest'
                            }
                        });

                        const data = await response.json();

                        if (data.success) {
                            // ÊäÄË°ìÊÉÖÂ†±Á∑®ÈõÜ„Éö„Éº„Ç∏„Å∏ÈÅ∑ÁßªÔºà„Éà„Éº„Çπ„Éà„É°„ÉÉ„Çª„Éº„Ç∏‰ªò„ÅçÔºâ
                            window.location.href = techUrl + (techUrl.includes('?') ? '&' : '?') + 'toast_message=‰øùÂ≠ò„Åó„ÄÅÊäÄË°ìÊÉÖÂ†±„ÅÆÁ∑®ÈõÜÁîªÈù¢„Å´ÁßªÂãï„Åó„Åæ„Åó„Åü„ÄÇ';
                        } else {
                            throw new Error(data.error || '‰øùÂ≠ò„Å´Â§±Êïó„Åó„Åæ„Åó„Åü');
                        }
                    } catch (error) {
                        showToast(error.message, 'error');
                    }
                }
            }
            modal.hide();
        });
    }
});
</script>

<!-- „ÉÑ„Éº„É´„ÉÅ„ÉÉ„Éó„ÇíÊúâÂäπÂåñ„Åô„Çã„Çπ„ÇØ„É™„Éó„Éà -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    const techBtn = document.querySelector('.btn-cyber-secondary');
    let pressTimer;
    let tooltipInstance;

    // PC„ÅÆÂ†¥Âêà„ÅØ„ÉÑ„Éº„É´„ÉÅ„ÉÉ„Éó„Å™„Åó
    if (!('ontouchstart' in window)) {
        return;
    }

    // „Çø„ÉÉ„ÉÅÈñãÂßã
    techBtn.addEventListener('touchstart', function(e) {
        pressTimer = setTimeout(() => {
            tooltipInstance = new bootstrap.Tooltip(techBtn, {
                title: '‰øùÂ≠ò„Åó„Å¶ÊäÄË°ìÊÉÖÂ†±„ÅÆÁ∑®ÈõÜ„Å∏',
                placement: 'left',
                trigger: 'manual'
            });
            tooltipInstance.show();
        }, 500); // 500msÔºà0.5ÁßíÔºâ„ÅÆÈï∑Êäº„Åó„ÅßË°®Á§∫
    });

    // „Çø„ÉÉ„ÉÅÁµÇ‰∫Ü
    techBtn.addEventListener('touchend', function(e) {
        clearTimeout(pressTimer);
        if (tooltipInstance) {
            tooltipInstance.dispose();
            tooltipInstance = null;
        }
    });

    // „Çø„ÉÉ„ÉÅ„Åå„Ç≠„É£„É≥„Çª„É´„Åï„Çå„ÅüÂ†¥Âêà
    techBtn.addEventListener('touchcancel', function(e) {
        clearTimeout(pressTimer);
        if (tooltipInstance) {
            tooltipInstance.dispose();
            tooltipInstance = null;
        }
    });

    // ÁîªÈù¢„Åã„ÇâÊåá„ÅåÈõ¢„Çå„ÅüÊôÇ
    document.addEventListener('touchend', function(e) {
        if (tooltipInstance) {
            tooltipInstance.dispose();
            tooltipInstance = null;
        }
    });
});
</script>

<script>
// „Çπ„ÇØ„É≠„Éº„É´Âà∂Âæ°„ÅÆ„Åü„ÇÅ„ÅÆÂ§âÊï∞
let lastScrollTop = 0;
const tabsElement = document.getElementById('appTabs');

// „Çπ„ÇØ„É≠„Éº„É´„Ç§„Éô„É≥„Éà„ÅÆ„É™„Çπ„Éä„Éº
window.addEventListener('scroll', function() {
    const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
    
    // „Çπ„ÇØ„É≠„Éº„É´ÊñπÂêë„ÇíÂà§ÂÆöÔºà‰∏ä:true, ‰∏ã:falseÔºâ
    const isScrollingUp = scrollTop < lastScrollTop;
    
    // „Çπ„ÇØ„É≠„Éº„É´‰ΩçÁΩÆ„Åå100px‰ª•‰∏ä„Åß„ÄÅ„Åã„Å§‰∏ã„Å´„Çπ„ÇØ„É≠„Éº„É´‰∏≠
    if (scrollTop > 100 && !isScrollingUp) {
        tabsElement.classList.add('hidden');
    } else {
        tabsElement.classList.remove('hidden');
    }
    
    lastScrollTop = scrollTop;
});
</script>

<script>
// „Éõ„Éº„É†„Éú„Çø„É≥„ÇØ„É™„ÉÉ„ÇØÊôÇ„ÅÆÂá¶ÁêÜ
function handleHomeClick(event) {
    event.preventDefault();
    
    // readonly„Åã„Å©„ÅÜ„Åã„Çí„ÉÅ„Çß„ÉÉ„ÇØ
    const isReadOnly = {% if readonly %}true{% else %}false{% endif %};
    
    if (isReadOnly) {
        // Ë©≥Á¥∞ÁîªÈù¢„ÅÆÂ†¥Âêà„ÅØÁõ¥Êé•„Éõ„Éº„É†„Å∏ÈÅ∑Áßª
        window.location.href = '/';
    } else {
        // Á∑®ÈõÜÁîªÈù¢„ÅÆÂ†¥Âêà„ÅØ„ÉÄ„Ç§„Ç¢„É≠„Ç∞„ÇíË°®Á§∫
        const homeDialog = document.getElementById('homeDialog');
        if (homeDialog) {
            homeDialog.style.display = 'block';
        }
    }
}

// „ÉÄ„Ç§„Ç¢„É≠„Ç∞„ÇíÈñâ„Åò„ÇãÂá¶ÁêÜ
function closeHomeDialog() {
    const homeDialog = document.getElementById('homeDialog');
    homeDialog.style.display = 'none';
}

// „Éõ„Éº„É†„Å∏ÁßªÂãïÁî®„ÅÆÊñ∞„Åó„ÅÑ‰øùÂ≠òÈñ¢Êï∞
function saveAndGoHome() {
    const form = document.getElementById('appForm');
    if (form) {
        // FormData„Ç™„Éñ„Ç∏„Çß„ÇØ„Éà„Çí‰ΩúÊàê
        const formData = new FormData(form);
        
        // Fetch API„ÅßPOST„É™„ÇØ„Ç®„Çπ„Éà„ÇíÈÄÅ‰ø°
        fetch(form.action + '?redirect=home', {  // URL„Å´„Éë„É©„É°„Éº„Çø„ÇíËøΩÂä†
            method: 'POST',
            body: formData,
            headers: {
                'X-Requested-With': 'XMLHttpRequest'
            }
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                // ‰øùÂ≠òÊàêÂäüÂæå„Å´„Éõ„Éº„É†„Éö„Éº„Ç∏„Å∏„É™„ÉÄ„Ç§„É¨„ÇØ„Éà
                window.location.href = '/';
            } else {
                alert('‰øùÂ≠ò„Å´Â§±Êïó„Åó„Åæ„Åó„ÅüÔºö' + (data.error || '‰∏çÊòé„Å™„Ç®„É©„Éº'));
            }
        })
        .catch(error => {
            console.error('Error:', error);
            alert('‰øùÂ≠ò‰∏≠„Å´„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Åæ„Åó„Åü');
        });
    } else {
        console.error('Form not found');
        alert('„Éï„Ç©„Éº„É†„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì');
    }
}
</script>
{% endblock %} 
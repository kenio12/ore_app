{% include 'apps_gallery/shared/disabled_styles.html' %}

<div id="dev_env" class="container" style="margin: 0 !important; padding: 0 !important;">
    <div class="card border-0 shadow-lg">
        <div class="card-body">
            <h2 class="card-title h3 mb-4">
                <i class="bi bi-tools text-cyber-orange"></i>
                <span class="text-cyber-orange">ソフトウェア環境</span>
            </h2>

            <div class="dev-env-inputs">
                <!-- タブの説明文 -->
                <div class="mb-4">
                    <p class="text-cyber-orange mb-3" style="font-size: 1.05rem;">
                        このセクションでは、アプリケーション開発に使用したソフトウェア環境（エディタ、バージョン管理、CI/CDなど）について教えてください。
                        物理的なパソコン機器（機種、CPU、メモリなど）については、「ハードウェア環境」タブで入力できます。
                    </p>
                </div>
                
                <!-- IDE/エディタ -->
                <div class="mb-4">
                    <label class="form-label text-cyber-orange">使用したIDE/エディタ <span class="text-danger">*</span></label>
                    <p class="text-muted small mb-3 text-cyber-orange">
                        ※コードを書くための編集ツールです。Visual Studio Code、Cursor、PyCharmなど、
                        好みのエディタを選んでください。初学者の方にはVisual Studio CodeやCursor（AI支援機能付き）がおすすめです。
                    </p>
                    <div class="row g-3">
                        {% for key, value in editors.items %}
                        <div class="col-md-4">
                            <div class="form-check">
                                <input type="checkbox" 
                                       id="editor-{{ key }}"
                                       class="form-check-input cyber-orange-focus"
                                       name="development_environment_editors"
                                       value="{{ key }}"
                                       {% if app.development_environment and app.development_environment.editors and key in app.development_environment.editors %}checked{% endif %}
                                       {% if readonly %}disabled{% endif %}>
                                <label class="form-check-label text-cyber-orange" for="editor-{{ key }}">{{ value }}</label>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>

                <!-- バージョン管理 -->
                <div class="mb-4">
                    <label class="form-label text-cyber-orange">バージョン管理システム <span class="text-danger">*</span></label>
                    <p class="text-muted small mb-3 text-cyber-orange">
                        ※コードの変更履歴を管理するツールです。
                        Gitは現代の開発ではほぼ必須のツールです。
                        その上でGitHubやGitLabなどのサービスと組み合わせて使用すると、
                        コードの共有やバックアップがより便利になります。
                        個人開発でもGit + GitHubの使用を強くおすすめします。
                    </p>
                    <div class="row g-3">
                        {% for key, value in version_control.items %}
                        <div class="col-md-4">
                            <div class="form-check">
                                <input type="checkbox" 
                                       id="vc-{{ key }}"
                                       class="form-check-input cyber-orange-focus"
                                       name="development_environment_version_control"
                                       value="{{ key }}"
                                       {% if app.development_environment and key in app.development_environment.version_control %}checked{% endif %}
                                       {% if readonly %}disabled{% endif %}>
                                <label class="form-check-label text-cyber-orange" for="vc-{{ key }}">{{ value }}</label>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>

                <!-- 仮想化ツール -->
                <div class="mb-4">
                    <label class="form-label text-cyber-orange">仮想化ツール</label>
                    <p class="text-muted small mb-3 text-cyber-orange">
                        ※開発環境を簡単に構築・共有するためのツールです。
                        Dockerが代表的で、複数のコンテナ（アプリ、データベースなど）を
                        使う場合はDocker Composeと組み合わせて使用します。
                        メリットは：
                        1. パソコンのOSが変わっても同じ環境で開発できる
                        2. 新しいパソコンでも「Docker起動するだけ」で開発再開できる
                        3. チームメンバー全員が同じ環境で開発できる
                        
                        個人開発では必須ではありませんが、使えると便利なツールです。
                    </p>
                    <div class="row g-3">
                        {% for key, value in virtualization_tools.items %}
                        <div class="col-md-4">
                            <div class="form-check">
                                <input type="checkbox" 
                                       id="virt-{{ key }}"
                                       class="form-check-input cyber-orange-focus"
                                       name="development_environment_virtualization"
                                       value="{{ key }}"
                                       {% if app.development_environment and key in app.development_environment.virtualization %}checked{% endif %}
                                       {% if readonly %}disabled{% endif %}>
                                <label class="form-check-label text-cyber-orange" for="virt-{{ key }}">{{ value }}</label>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>

                <!-- チームサイズ -->
                <div class="mb-4">
                    <label class="form-label text-cyber-orange">チームサイズ</label>
                    <p class="text-muted small mb-3 text-cyber-orange">
                        ※開発に携わった人数を選択してください。
                        個人開発の場合は「1人」を選択してください。
                    </p>
                    <div class="row g-3">
                        {% for key, value in team_sizes.items %}
                        <div class="col-md-4">
                            <div class="form-check">
                                <input type="radio" 
                                       id="team-size-{{ key }}"
                                       class="form-check-input cyber-orange-focus"
                                       name="development_environment_team_size"
                                       value="{{ key }}"
                                       {% if app.development_environment and app.development_environment.team_size == key %}checked{% endif %}
                                       {% if readonly %}disabled{% endif %}>
                                <label class="form-check-label text-cyber-orange" for="team-size-{{ key }}">
                                    {{ value }}
                                </label>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>

                <!-- コミュニケーションツール -->
                <div class="mb-4">
                    <label class="form-label text-cyber-orange">コミュニケーションツール</label>
                    <p class="text-muted small mb-3 text-cyber-orange">
                        ※チーム開発時のコミュニケーションに使用するツールです。
                        SlackやDiscordが一般的です。個人開発の場合は選択不要です。
                    </p>
                    <div class="row g-3">
                        {% for key, value in communication_tools.items %}
                        <div class="col-md-4">
                            <div class="form-check">
                                <input type="checkbox" 
                                       id="comm-{{ key }}"
                                       class="form-check-input cyber-orange-focus"
                                       name="development_environment_communication_tools"
                                       value="{{ key }}"
                                       {% if app.development_environment and key in app.development_environment.communication_tools %}checked{% endif %}
                                       {% if readonly %}disabled{% endif %}>
                                <label class="form-check-label text-cyber-orange" for="comm-{{ key }}">
                                    {{ value }}
                                </label>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>

                <!-- CI/CD -->
                <div class="mb-4">
                    <label class="form-label text-cyber-orange">CI/CDツール</label>
                    <div class="row g-3">
                        {% for key, value in ci_cd.items %}
                        <div class="col-md-4">
                            <div class="form-check">
                                <input type="checkbox" 
                                       id="cicd-{{ key }}"
                                       class="form-check-input cyber-orange-focus"
                                       name="development_environment_ci_cd"
                                       value="{{ key }}"
                                       {% if app.development_environment and app.development_environment.ci_cd and key in app.development_environment.ci_cd %}checked{% endif %}
                                       {% if readonly %}disabled{% endif %}>
                                <label class="form-check-label text-cyber-orange" for="cicd-{{ key }}">{{ value }}</label>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>

                <!-- インフラストラクチャ -->
                <div class="mb-4">
                    <label class="form-label text-cyber-orange">インフラストラクチャ</label>
                    <p class="text-muted small mb-3 text-cyber-orange">
                        ※インフラストラクチャはアプリケーションを動かすための基盤となる環境のことです。
                        サーバー、データベース、ホスティングサービスなどが含まれます。
                        個人開発では、以下のようなホスティングサービスを選ぶことが多いです：
                        - PythonAnywhere：Pythonアプリに特化した、初学者に優しいホスティング
                        - Render：無料枠があり、デプロイが簡単
                        - Heroku：安定性が高く、多機能（一部有料）
                        - Vercel：フロントエンド特化で使いやすい
                    </p>
                    <div class="row g-3">
                        {% for key, value in infrastructure.items %}
                        <div class="col-md-4">
                            <div class="form-check">
                                <input type="checkbox" 
                                       id="infra-{{ key }}"
                                       class="form-check-input cyber-orange-focus"
                                       name="development_environment_infrastructure"
                                       value="{{ key }}"
                                       {% if app.development_environment and key in app.development_environment.infrastructure %}checked{% endif %}
                                       {% if readonly %}disabled{% endif %}>
                                <label class="form-check-label text-cyber-orange" for="infra-{{ key }}">{{ value }}</label>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>

                <!-- APIツール -->
                <div class="mb-4">
                    <label class="form-label text-cyber-orange">APIツール</label>
                    <p class="text-muted small mb-3 text-cyber-orange">
                        ※APIツールは外部サービスとの連携時に使用します。
                        シンプルなWebアプリケーションでは必要ない場合が多いです。
                    </p>
                    <div class="row g-3">
                        {% for key, value in api_tools.items %}
                        <div class="col-md-4">
                            <div class="form-check">
                                <input type="checkbox" 
                                       id="api-tool-{{ key }}"
                                       class="form-check-input cyber-orange-focus"
                                       name="development_environment_api_tools"
                                       value="{{ key }}"
                                       {% if app.development_environment and key in app.development_environment.api_tools %}checked{% endif %}
                                       {% if readonly %}disabled{% endif %}>
                                <label class="form-check-label text-cyber-orange" for="api-tool-{{ key }}">{{ value }}</label>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>

                <!-- モニタリングツール -->
                <div class="mb-4">
                    <label class="form-label text-cyber-orange">モニタリングツール</label>
                    <p class="text-muted small mb-3 text-cyber-orange">
                        ※モニタリングツールはサービスの稼働状況を監視するために使用されます。
                        大規模サービスでは重要ですが、個人開発では通常必要ありません。
                    </p>
                    <div class="row g-3">
                        {% for key, value in monitoring_tools.items %}
                        <div class="col-md-4">
                            <div class="form-check">
                                <input type="checkbox" 
                                       id="monitoring-{{ key }}"
                                       class="form-check-input cyber-orange-focus"
                                       name="development_environment_monitoring_tools"
                                       value="{{ key }}"
                                       {% if app.development_environment and key in app.development_environment.monitoring_tools %}checked{% endif %}
                                       {% if readonly %}disabled{% endif %}>
                                <label class="form-check-label text-cyber-orange" for="monitoring-{{ key }}">{{ value }}</label>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- デバッグ情報の表示 -->
<div style="display: none;">
    <p>Editors: {{ editors }}</p>
    <p>Version Control: {{ version_control }}</p>
    <p>CI/CD: {{ ci_cd }}</p>
    <p>Virtualization Tools: {{ virtualization_tools }}</p>
</div>

<style>
/* 開発環境タブのスタイル */
#dev-env-section .card-title,
#dev-env-section .text-cyber-orange {
    color: var(--cyber-orange) !important;
    text-shadow: 0 0 10px var(--cyber-orange),
                0 0 20px var(--cyber-orange) !important;
}

#dev-env-section .form-control,
#dev-env-section .form-select,
#dev-env-section .form-check-input {
    border: 2px solid var(--cyber-orange) !important;
    color: var(--cyber-orange) !important;
}

#dev-env-section .form-check-input:checked {
    background-color: var(--cyber-orange) !important;
    box-shadow: 0 0 10px var(--cyber-orange) !important;
}

#dev-env-section .form-label,
#dev-env-section .form-check-label {
    color: var(--cyber-orange) !important;
    text-shadow: 0 0 5px var(--cyber-orange) !important;
}

/* カード全体 */
body #dev_env .card {
    background: rgba(30, 41, 59, 0.98) !important;
    border: 1px solid var(--cyber-orange) !important;  /* 紫から変更 */
}

/* すべてのテキストを明るく */
body #dev_env .form-label,
body #dev_env label.form-label,
body #dev_env .form-check-label,
body #dev_env .text-cyber-purple,
body #dev_env p.text-muted.small.mb-3,
body #dev_env div.mb-4 > label.form-label,
body #dev_env .form-check-label.text-cyber-purple {
    color: var(--cyber-orange) !important;
    font-weight: 400 !important;
    opacity: 1 !important;
}

/* 説明文も明るく */
body #dev_env .text-muted {
    color: var(--cyber-orange) !important;
    opacity: 0.9 !important;
}

/* 必須マーク */
body #dev_env .text-danger {
    color: var(--cyber-orange) !important;
}

/* チェックボックスとラジオボタンをよりクリアに */
body #dev_env .form-check-input {
    border: 3px solid var(--cyber-orange) !important;  /* ボーダーをさらに太く */
    background-color: rgba(30, 41, 59, 0.98) !important;
    width: 1.2em !important;
    height: 1.2em !important;
    position: relative !important;
    margin-top: 0.3em !important;  /* 位置調整 */
}

body #dev_env .form-check-input:checked {
    background-color: var(--cyber-orange) !important;
    border-color: var(--cyber-orange) !important;
    background-image: none !important;  /* デフォルトのチェックマークを消す */
}

/* チェックマークをカスタマイズ */
body #dev_env .form-check-input:checked::after {
    content: '✓' !important;
    position: absolute !important;
    color: rgba(30, 41, 59, 0.98) !important;  /* 背景色と同じ色 */
    font-size: 1em !important;
    line-height: 0.8 !important;
    top: 50% !important;
    left: 50% !important;
    transform: translate(-50%, -50%) !important;
    font-weight: bold !important;
}

/* チェックボックスのラベル */
body #dev_env .form-check label {
    color: var(--cyber-orange) !important;
    font-weight: 500 !important;
    padding-left: 0.5em !important;
}

/* 見出し */
body #dev_env h2.card-title span,
body #dev_env h2.card-title i.bi-tools {
    color: var(--cyber-orange) !important;
}

/* チェックボックスとラジオボタンのホバー状態 */
body #dev_env .form-check-input:hover {
    border-color: var(--cyber-orange) !important;
    cursor: pointer !important;
}
</style> 